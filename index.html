<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Demo QuaggaJS</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
</head>
<body>
  <div id="video"></div>
  <button id="startBtn">Iniciar</button>
  <button id="stopBtn" disabled>Detener</button>
  <script>
    let quaggaStarted = false;
    document.getElementById('startBtn').onclick = () => {
      Quagga.init({
        inputStream: {
          name: "Live",
          type: "LiveStream",
          target: document.querySelector('#video'),
          constraints: { facingMode: "environment" }
        },
        decoder: { readers: ["ean_reader", "code_128_reader"] }
      }, function(err) {
        if (err) { alert(err); return; }
        Quagga.start();
        quaggaStarted = true;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('stopBtn').disabled = false;
      });
    };
    document.getElementById('stopBtn').onclick = () => {
      if (quaggaStarted) {
        Quagga.stop();
        quaggaStarted = false;
        document.getElementById('startBtn').disabled = false;
        document.getElementById('stopBtn').disabled = true;
      }
    };
  </script>
</body>
</html>
